# 港股程序化交易系统 - 系统概述

## 1.1 项目背景
本系统是专门针对港股ETF和大盘股的程序化交易系统，采用MACD、BOLL、成交量三重技术指标组合策略，目标实现15-20%的年化收益率。系统使用Java SpringBoot框架，支持T+0交易，采用30分钟主周期配合120分钟确认周期的多时间框架策略。

## 1.2 核心指标与目标
- **目标收益**: 年化15-20%
- **最大回撤**: <15%
- **资金规模**: 10万港币
- **单笔上限**: 5万港币
- **交易标的**: 盈富基金(2800.HK)、恒生科技ETF(3033.HK)、腾讯(00700.HK)
- **交易模式**: T+0日内及波段结合

## 1.3 技术栈
- **核心框架**: Spring Boot 3.2
- **命令行接口**: Apache Commons CLI + 自定义CLI框架
- **回测引擎**: 专业级回测框架 + 数据预热机制
- **消息队列**: 内存队列（Disruptor + Spring Events）
- **缓存**: Redis 7.2
- **数据库**: H2嵌入式数据库（开发）/ MySQL 8.0（生产）
- **技术指标**: MACD、布林带、成交量分析（基于TA4J）
- **券商接口**: 富途OpenAPI
- **报告生成**: 多格式专业报告（JSON/CSV/HTML/中文摘要）
- **手续费计算**: 精确港股费用结构计算

## 1.4 策略体系
- **策略A - MACD趋势跟踪**: 适用于趋势市，目标收益8-10%/次
- **策略B - BOLL均值回归**: 适用于震荡市，目标收益3-5%/次  
- **策略C - 量价突破策略**: 适用于转折市，目标收益5-8%/次
- **自适应切换**: 根据市场状态自动选择最优策略

## 1.5 架构原则
- 高内聚低耦合
- 策略模块化设计
- 多周期共振验证
- 严格风险控制
- 动态仓位管理
- CLI优先设计理念
- 专业级回测分析
- 数据质量保证机制
- 多格式报告输出

## 1.6 CLI命令行接口

### 1.6.1 设计理念
系统采用CLI优先的设计理念，提供专业级命令行交互体验：
- **简洁高效**: 一行命令完成复杂回测分析
- **专业输出**: 类似量化平台的详细报告包
- **中文界面**: 本地化的提示信息和帮助文档
- **批处理友好**: 支持脚本自动化和参数化执行

### 1.6.2 核心功能
- **回测分析**: `backtest` 命令支持完整的策略回测
- **报告生成**: 自动生成多格式专业报告
- **数据管理**: 智能数据预热和质量检查
- **帮助系统**: 完整的中文帮助和使用指南

### 1.6.3 使用示例
```bash
# 执行02800.HK的2024年MACD策略回测
java -jar trading.jar backtest --strategy MACD --symbol 02800.HK --from 2024-01-01 --to 2024-12-31 --output ./output

# 查看帮助信息
java -jar trading.jar help backtest

# 系统概览
java -jar trading.jar
```

### 1.6.4 输出特色
- **目录结构**: `output/hk_macd_v1_02800_YYYYMMDD_HHMMSS/`
- **核心文件**: 包含摘要、交易记录、权益曲线、性能指标等
- **可视化**: HTML报告支持图表展示
- **本地化**: 中文摘要和分析报告

### 1.6.5 专业特性
- **精确费用**: 基于2024年港股费用结构的准确计算
- **数据预热**: 100天预热期确保技术指标准确性  
- **质量检查**: 自动数据验证和完整性检查
- **目标验证**: 自动检验15-20%年化收益目标达成情况